function formImageInput(){setTimeout(function(){$(".img-upload").fileinput({showUpload:!1,browseClass:"btn btn-success",browseLabel:"Pick Image",browseIcon:'<i class="glyphicon glyphicon-picture"></i>',removeClass:"btn btn-danger",allowedFileExtensions:["jpg","png","jpeg","bmp"],removeLabel:"Delete"})},170)}(function(){window.S3Upload=function(){function e(e){null===e&&(e={});for(var t in e)this[t]=e[t];this.handleFileSelect(document.getElementById(this.file_dom_selector))}return e.prototype.s3_object_name="default_name",e.prototype.s3_sign_put_url="/signS3put",e.prototype.file_dom_selector="file_upload",e.prototype.onFinishS3Put=function(e){return console.log("base.onFinishS3Put()",e)},e.prototype.onError=function(e){return console.log("base.onError()",e)},e.prototype.handleFileSelect=function(e){var t,n,o,r,s,i;for(n=e.files,o=[],i=[],r=0,s=n.length;s>r;r++)t=n[r],i.push(this.uploadFile(t));return i},e.prototype.createCORSRequest=function(e,t){var n;return n=new XMLHttpRequest,null!==n.withCredentials?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},e.prototype.executeOnSignedUrl=function(e,t){var n,o;return n=this,o=new XMLHttpRequest,o.open("GET",this.s3_sign_put_url+"?s3_object_type="+e.type+"&s3_object_name="+this.s3_object_name,!0),o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(e){var o;if(4===this.readyState&&200===this.status){try{o=JSON.parse(this.responseText)}catch(r){return n.onError('Signing server returned some ugly/empty JSON: "'+this.responseText+'"'),!1}return t(o.signed_request,o.url)}return 4===this.readyState&&200!==this.status?n.onError("Could not contact request signing server. Status = "+this.status):void 0},o.send()},e.prototype.uploadToS3=function(e,t,n){var o,r;return o=this,r=this.createCORSRequest("PUT",t),r?(r.onload=function(){return 200===r.status?o.onFinishS3Put(n):o.onError("Upload error: "+r.status)},r.onerror=function(){return o.onError("XHR error.")},r.upload.onprogress=function(e){var t;e.lengthComputable&&(t=Math.round(e.loaded/e.total*100))}):this.onError("CORS not supported"),r.setRequestHeader("Content-Type",e.type),r.setRequestHeader("x-amz-acl","public-read"),r.send(e)},e.prototype.uploadFile=function(e){var t;return t=this,this.executeOnSignedUrl(e,function(n,o){return t.uploadToS3(e,n,o)})},e}()}).call(this);