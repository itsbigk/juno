angular.module("Juno",["homeController","ngRoutes","restaurantService","adminRestaurantIndex","editRestaurantController","deleteRestaurantController","ui.bootstrap"]),angular.module("Juno").controller("createRestaurantController",["$scope","$state","Restaurant",function(e,t,a){e.type="create",e.formData={},e.saveRestaurant=function(t){console.log(e.formData),e.processing=!0,e.message="",a.create(e.formData).success(function(t){if(console.log("success!"),console.log("data: ",t),e.processing=!1,null==t.errors)e.message=t.message,e.formData={};else for(var a in t.errors){e.message=t.message;var r=t.errors[a].message.substring(5).replace(/`/g,""),n="#"+a;$(n).hasClass("error")||$(n+"-container").append("<div class='error-message'>"+r+"</div>"),$(n).addClass("error")}}).error(function(t){e.message=t.message})}}]),angular.module("deleteRestaurantController",[]).controller("deleteRestaurantController",["$scope","Restaurant","$stateParams",function(e,t,a){e.type="delete",t.all().success(function(t){e.restaurants=t}),e.deleteRestaurant=function(a){t["delete"](a).success(function(t){e.message=t.message,e.restaurants=t.restaurants})}}]),angular.module("editRestaurantController",[]).controller("editRestaurantController",["$scope","Restaurant","$stateParams","$location",function(e,t,a,r){e.type="edit",t.get(a.restaurant_id).success(function(t){e.formData=t,e.restaurantState=t.state}),e.saveRestaurant=function(){e.processing=!0,e.message="",t.update(a.restaurant_id,e.formData).success(function(t){e.processing=!1,e.message=t.message}).error(function(t){e.processing=!1,e.message=t.message})}}]),angular.module("adminRestaurantIndex",[]).controller("adminRestaurantIndex",["$scope","Restaurant",function(e,t){e.type="list",e.message="",t.all().success(function(t){e.restaurants=t}),e.archiveListing=function(a){t.update(a,{archived:!0}).success(function(t){e.message="Restaurant archived successfully!",e.restaurants=t.restaurants}).error(function(t){e.message="Restaurant was not archived"})}}]),angular.module("homeController",[]).controller("homeController",["$scope",function(e){e.hey="hey"}]),angular.module("restaurantService",[]).factory("Restaurant",["$http",function(e){return{all:function(){return e.get("/api/restaurants")},get:function(t){return e.get("/api/restaurants/"+t)},create:function(t){return e.post("/api/restaurants",t)},update:function(t,a){return e.put("/api/restaurants/"+t,a)},"delete":function(t){return e["delete"]("/api/restaurants/"+t)}}}]),angular.module("ngRoutes",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,a){t.otherwise("/"),e.state("/",{url:"/",controller:"homeController",templateUrl:"partials/home.html"}).state("admin",{url:"/admin",controller:"adminRestaurantIndex",templateUrl:"partials/admin/admin.html"}).state("admin-restaurant-index",{url:"/admin/restaurants",controller:"adminRestaurantIndex",templateUrl:"partials/admin/restaurants/index.html"}).state("admin-delete-restaurants",{url:"/admin/restaurants/delete",controller:"deleteRestaurantController",templateUrl:"partials/admin/restaurants/index.html"}).state("admin-restaurant-new",{url:"/admin/restaurants/new",controller:"createRestaurantController",templateUrl:"partials/admin/restaurants/restaurant.html"}).state("admin-edit-restaurant",{url:"/admin/restaurants/:restaurant_id",controller:"editRestaurantController",templateUrl:"partials/admin/restaurants/restaurant.html"})}]);