angular.module("Juno",["ui.router"]),angular.module("Juno").controller("createRestaurantController",["$scope","$state","Restaurant",function(e,r,a){function t(){$(".form-control").removeClass("error"),$(".error-message").remove()}e.type="create",e.formData={},e.saveRestaurant=function(r){console.log(e.formData),e.processing=!0,e.message="",a.create(e.formData).success(function(r){if(console.log("success!"),console.log("data: ",r),e.processing=!1,void 0===r.errors)e.message=r.message,e.formData={},t();else{t();for(var a in r.errors){e.message=r.message;var s=r.errors[a].message.replace(/Path|`/g,"").trim(),n="#"+a;$(n).hasClass("error")||(console.log("has error: "+n),$(n+"-container").append("<div class='error-message'>"+s+"</div>")),$(n).addClass("error")}}}).error(function(r){e.message=r.message})}}]),angular.module("Juno").controller("deleteRestaurantController",["$scope","Restaurant","$stateParams",function(e,r,a){e.type="delete";var t=function(){r.all().success(function(r){e.restaurants=r})};e.deleteRestaurant=function(a){r["delete"](a).success(function(r){e.message=r.message,t()}).error(function(r){e.message=r.message})},t()}]),angular.module("Juno").controller("editRestaurantController",["$scope","Restaurant","$stateParams","$location",function(e,r,a,t){function s(){$(".form-control").removeClass("error"),$(".error-message").remove()}e.type="edit",r.get(a.restaurant_id).success(function(r){e.formData=r,e.restaurantState=r.state}),e.saveRestaurant=function(){console.log(e.formData),e.processing=!0,e.message="",r.update(a.restaurant_id,e.formData).success(function(r){if(console.log("success!"),console.log("data: ",r),e.processing=!1,void 0===r.errors)e.message=r.message,s();else{s();for(var a in r.errors){e.message=r.message;var t=r.errors[a].message.replace(/Path|`/g,"").trim(),n="#"+a;$(n).hasClass("error")||(console.log("has error: "+n),$(n+"-container").append("<div class='error-message'>"+t+"</div>")),$(n).addClass("error")}}}).error(function(r){e.message=r.message})}}]),angular.module("Juno").controller("adminRestaurantIndex",["$scope","Restaurant",function(e,r){e.type="list",e.message="";var a=function(){r.all().success(function(r){e.restaurants=r})};e.archiveListing=function(t){r.update(t,{archived:!0}).success(function(r){e.message="Restaurant archived successfully!",a()}).error(function(r){e.message="Restaurant was not archived"})},a()}]),angular.module("Juno").controller("homeController",["$scope",function(e){e.hey="hey"}]);var app=angular.module("Juno");app.directive("confirmClick",function(){return{priority:-1,restrict:"A",link:function(e,r,a){var t=a.confirmation||"Are you sure?";r.bind("click",function(r){if(window.confirm(t)){var s=a.confirmClick;s&&e.$apply(e.$eval(s))}})}}}),angular.module("Juno").factory("Restaurant",["$http",function(e){return{all:function(){return e.get("/api/restaurants")},get:function(r){return e.get("/api/restaurants/"+r)},create:function(r){return e.post("/api/restaurants",r)},update:function(r,a){return e.put("/api/restaurants/"+r,a)},"delete":function(r){return e["delete"]("/api/restaurants/"+r)}}}]),angular.module("Juno").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,a){r.otherwise("/"),e.state("/",{url:"/",controller:"homeController",templateUrl:"partials/home.html"}).state("admin",{url:"/admin",controller:"adminRestaurantIndex",templateUrl:"partials/admin/admin.html"}).state("admin-restaurant-index",{url:"/admin/restaurants",controller:"adminRestaurantIndex",templateUrl:"partials/admin/restaurants/index.html"}).state("admin-delete-restaurants",{url:"/admin/restaurants/delete",controller:"deleteRestaurantController",templateUrl:"partials/admin/restaurants/index.html"}).state("admin-restaurant-new",{url:"/admin/restaurants/new",controller:"createRestaurantController",templateUrl:"partials/admin/restaurants/restaurant.html"}).state("admin-edit-restaurant",{url:"/admin/restaurants/:restaurant_id",controller:"editRestaurantController",templateUrl:"partials/admin/restaurants/restaurant.html"})}]);